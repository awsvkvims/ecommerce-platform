name: Deploy Staging (promote backend image)

on:
  workflow_dispatch:
    inputs:
      image_tag:
        description: "ECR image tag to deploy (usually a commit SHA)"
        required: true

permissions:
  contents: read

jobs:
  deploy:
    uses: ./.github/workflows/_deploy-backend-ecs.yml
    secrets: inherit
    with:
      environment_name: staging
      image_tag: ${{ inputs.image_tag }}